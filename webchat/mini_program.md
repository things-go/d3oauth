# 小程序前端流程

1. 先检验本地缓存中是否有token,有则直接请求后端服务器,进行业务交互,无则 -> 2
2. wx.login(),获取到code -> 3
3. 把code传给后端,后端换取openid和session_key,返回信息和token -> 4
    - 如果openid存在于数据方圆中,根据openid查询用户的信息,返回信息和token,进行业务交互
    - 如果openid不存在数据库中,把openid存数据库,即插入了user用户,不过昵称,头像的信息均为空,返回信息和token,进行业务交互
4. 前端获取用户信息和token,如果用户信息为空,说明未授权得到用户信息,显示授权按钮,等待用户授权 -> 5
5. 用户同意授权之后,可以通过wx.getUserInfo()拿到用户信息,把信息传给后端更新用户信息,请求头携带token -> 6
6. 后端接收到请求之后,根据token获取对应的user表记录,用户,将信息新到数据库用户表